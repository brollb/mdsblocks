<html>
    <head>
        <meta charset="utf-8">
        <title>Mocha Tests</title>
        <link rel="stylesheet" href="mocha.css" />
  <script>
      var ws;
      function socket() {
          ws = new WebSocket("ws://127.0.0.1:9001");
          ws.onmessage = function ( e ) {
              var data = JSON.parse(e.data);
              if ( data.r ) {
                  location.reload();
              }
          };
      }
      setInterval(function () {
          if ( ws ) {
              if ( ws.readyState !== 1 ) {
                  socket();
              }
              } else {
              socket();
          }
      }, 500);
  </script> 
    </head>
    <body>
        <div id="mocha"></div>
        <script src="../src/lib/ramda.min.js"></script>
        <script src="../src/lib/async.js"></script>

        <script src="../src/lib/js-yaml.min.js"></script>
        <script src="../src/lib/octokat.js"></script>
        <script src="../src/utils.js"></script>
        <script src="../src/oauth_token.js"></script>
        <script src="../src/concept_loader.js"></script>
        <script src="../src/github_loader.js"></script>
        <script src="../src/metaMDS_block_creation.js"></script>
        <script src="../src/mds_editor.js"></script>

        <script src="expect.min.js"></script>
        <script src="mocha.js"></script>
        <script>mocha.setup('bdd')</script>

        <script src="test.utils.js"></script>
        <script src="yaml.js"></script>
        <script src="test.blockCreator.js"></script>
        <script src="test.githubLoader.js"></script>
        <script>
            var yaml = jsyaml;
            mocha.checkLeaks();
            mocha.globals(['Octokat', 'expect', 'yaml', 'R', 'async']);
            mocha.run();
        </script>
    </body>
</html>
