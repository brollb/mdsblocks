<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>MetaMDS Blockly Updating Sandbox</title>
  <style>
    html, body {
      height: 100%;
    }
    body {
      background-color: #fff;
      font-family: sans-serif;
      margin-top: 0;
      margin-bottom: 0;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
    iframe {
      width: 100%;
      height: 100%;
      border-style: solid;
      border-color: #ddd;
      border-width: 0 1px 1px 0;
    }
  </style>
  <!-- Make sure to remove this in production -->
  <!-- REMOVE include it above the </body> tag -->
  <script>
      var ws;
      function socket() {
          ws = new WebSocket("ws://127.0.0.1:9000");
          ws.onmessage = function ( e ) {
              var data = JSON.parse(e.data);
              if ( data.r ) {
                  location.reload();
              }
          };
      }
      setInterval(function () {
          if ( ws ) {
              if ( ws.readyState !== 1 ) {
                  socket();
              }
              } else {
              socket();
          }
      }, 500);
  </script> 
  <!-- REMOVE include it above the </body> tag -->
</head>
<body>
  <table width="100%" height="99%">
    <tr>
      <td>
          <center id='message'><h1><b>MetaMDS</b> Blockly Sandbox</h1></center>

        <p>I am using this page to get familiar with Blockly and how it will need to be used with the updated MetaMDS site</p>

      </td>
    </tr>
    <tr>
      <td height="99%">
        <script>
          function blocklyLoaded(blockly) {
            // Called once Blockly is fully loaded.
            window.Blockly = blockly;
          }
        </script>
        <iframe src="frame.html"></iframe>
      </td>
    </tr>
  </table>

</body>
</html>
